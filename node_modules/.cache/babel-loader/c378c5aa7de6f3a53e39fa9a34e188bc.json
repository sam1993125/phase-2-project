{"ast":null,"code":"var _jsxFileName = \"/Users/yixin/Development/code/phase-2/phase-2-project/src/components/Database.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react'; // import SearchBar from \"./SearchBar\"\n\nimport NewContainer from \"./NewContainer\";\nimport SearchBar from \"./SearchBar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Database(_ref) {\n  _s();\n\n  let {\n    handleClick\n  } = _ref;\n  const [newWorks, setNewWorks] = useState([]);\n  const [ids, setIds] = useState([]);\n  const [search, setSearch] = useState([]);\n  let arr = []; //useEffect 2. when ids state gets updated, start fetching each individual id\n\n  useEffect(() => {\n    ids.map(id => {\n      console.log(id);\n      fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${id}`).then(r => r.json()).then(id => {\n        // arr.push({\n        //     title: id.title,\n        //     image: id.primaryImageSmall,\n        //     date: id.objectDate,\n        //     artist: id.artistDisplayName,\n        //     medium:id.medium,\n        //     reference:id.objectURL\n        // })\n        let newArt = {\n          title: id.title,\n          image: id.primaryImageSmall,\n          date: id.objectDate,\n          artist: id.artistDisplayName,\n          medium: id.medium,\n          reference: id.objectURL\n        };\n        setNewWorks(newWorks => [...newWorks, newArt]);\n      });\n    });\n  }, [ids]); //useEffect 1. gets ids when search term changes\n\n  useEffect(() => {\n    fetch(`https://collectionapi.metmuseum.org/public/collection/v1/search?isHighlight=true&q=${search}`).then(r => r.json()).then(data => {\n      setIds([data.objectIDs]);\n      console.log(data.objectIDs);\n    });\n  } // eslint-disable-next-line react-hooks/exhaustive-deps\n  , [search]); // console.log(newWorks)\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      searchTerm: search,\n      onSearchChange: setSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(NewContainer, {\n      newWorks: newWorks,\n      handleClick: handleClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Database, \"7UUbG5FP9kXD58cyia/ds6uBAdI=\");\n\n_c = Database;\nexport default Database;\n\nvar _c;\n\n$RefreshReg$(_c, \"Database\");","map":{"version":3,"names":["React","useEffect","useState","NewContainer","SearchBar","Database","handleClick","newWorks","setNewWorks","ids","setIds","search","setSearch","arr","map","id","console","log","fetch","then","r","json","newArt","title","image","primaryImageSmall","date","objectDate","artist","artistDisplayName","medium","reference","objectURL","data","objectIDs"],"sources":["/Users/yixin/Development/code/phase-2/phase-2-project/src/components/Database.js"],"sourcesContent":["import React, {useEffect,useState} from 'react'\n// import SearchBar from \"./SearchBar\"\nimport NewContainer from \"./NewContainer\"\nimport SearchBar from \"./SearchBar\"\n\n\nfunction Database({handleClick}) {\n\nconst [newWorks, setNewWorks] = useState([])\nconst [ids, setIds] = useState([])\nconst [search, setSearch] = useState([])\n\nlet arr =[]\n\n//useEffect 2. when ids state gets updated, start fetching each individual id\nuseEffect(() => {\n    ids.map((id) => {\n        console.log(id)\n        fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${id}`)\n        .then(r=> r.json())\n        .then ((id) => {\n            // arr.push({\n            //     title: id.title,\n            //     image: id.primaryImageSmall,\n            //     date: id.objectDate,\n            //     artist: id.artistDisplayName,\n            //     medium:id.medium,\n            //     reference:id.objectURL\n            // })\n            let newArt = {\n                title: id.title,\n                image: id.primaryImageSmall,\n                date: id.objectDate,\n                artist: id.artistDisplayName,\n                medium:id.medium,\n                reference:id.objectURL\n            }\n            setNewWorks(newWorks => [...newWorks, newArt])\n        })\n    })\n}, [ids])\n//useEffect 1. gets ids when search term changes\nuseEffect(() => {\n        fetch(`https://collectionapi.metmuseum.org/public/collection/v1/search?isHighlight=true&q=${search}`)                                            \n            .then(r=> r.json())\n            .then((data) => {\n                setIds([data.objectIDs])\n                console.log(data.objectIDs)\n            })\n        } // eslint-disable-next-line react-hooks/exhaustive-deps\n,[search])\n\n\n// console.log(newWorks)\n\nreturn (\n    <div> \n    <SearchBar searchTerm={search} onSearchChange={setSearch}/>\n    <NewContainer newWorks={newWorks} handleClick={handleClick} />\n    </div>\n  )\n\n\n}\nexport default Database\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAAyBC,QAAzB,QAAwC,OAAxC,C,CACA;;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;;AAGA,SAASC,QAAT,OAAiC;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;EAEjC,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BN,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACO,GAAD,EAAMC,MAAN,IAAgBR,QAAQ,CAAC,EAAD,CAA9B;EACA,MAAM,CAACS,MAAD,EAASC,SAAT,IAAsBV,QAAQ,CAAC,EAAD,CAApC;EAEA,IAAIW,GAAG,GAAE,EAAT,CANiC,CAQjC;;EACAZ,SAAS,CAAC,MAAM;IACZQ,GAAG,CAACK,GAAJ,CAASC,EAAD,IAAQ;MACZC,OAAO,CAACC,GAAR,CAAYF,EAAZ;MACAG,KAAK,CAAE,oEAAmEH,EAAG,EAAxE,CAAL,CACCI,IADD,CACMC,CAAC,IAAGA,CAAC,CAACC,IAAF,EADV,EAECF,IAFD,CAEQJ,EAAD,IAAQ;QACX;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,IAAIO,MAAM,GAAG;UACTC,KAAK,EAAER,EAAE,CAACQ,KADD;UAETC,KAAK,EAAET,EAAE,CAACU,iBAFD;UAGTC,IAAI,EAAEX,EAAE,CAACY,UAHA;UAITC,MAAM,EAAEb,EAAE,CAACc,iBAJF;UAKTC,MAAM,EAACf,EAAE,CAACe,MALD;UAMTC,SAAS,EAAChB,EAAE,CAACiB;QANJ,CAAb;QAQAxB,WAAW,CAACD,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAce,MAAd,CAAb,CAAX;MACH,CApBD;IAqBH,CAvBD;EAwBH,CAzBQ,EAyBN,CAACb,GAAD,CAzBM,CAAT,CATiC,CAmCjC;;EACAR,SAAS,CAAC,MAAM;IACRiB,KAAK,CAAE,sFAAqFP,MAAO,EAA9F,CAAL,CACKQ,IADL,CACUC,CAAC,IAAGA,CAAC,CAACC,IAAF,EADd,EAEKF,IAFL,CAEWc,IAAD,IAAU;MACZvB,MAAM,CAAC,CAACuB,IAAI,CAACC,SAAN,CAAD,CAAN;MACAlB,OAAO,CAACC,GAAR,CAAYgB,IAAI,CAACC,SAAjB;IACH,CALL;EAMC,CAPA,CAOC;EAPD,EAQR,CAACvB,MAAD,CARQ,CAAT,CApCiC,CA+CjC;;EAEA,oBACI;IAAA,wBACA,QAAC,SAAD;MAAW,UAAU,EAAEA,MAAvB;MAA+B,cAAc,EAAEC;IAA/C;MAAA;MAAA;MAAA;IAAA,QADA,eAEA,QAAC,YAAD;MAAc,QAAQ,EAAEL,QAAxB;MAAkC,WAAW,EAAED;IAA/C;MAAA;MAAA;MAAA;IAAA,QAFA;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAQC;;GAzDQD,Q;;KAAAA,Q;AA0DT,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}